// Generated by CoffeeScript 1.9.3
(function() {
  var $, AJAXWorkersManager;

  $ = jQuery;

  AJAXWorkersManager = (function() {
    var shownFirstWorkersId;

    function AJAXWorkersManager() {}

    shownFirstWorkersId = [];

    AJAXWorkersManager.prototype.getWorkersBoss = function(bossId, count) {

      /* Get subordinates boss
      
      bossId: Id user.
          If bossId = "first-hierarchy" show users who are not have boss.
      
      count: Count list workers.
      
      listUnnecessaryId: Already get and show workers.
          No need to re-receive.
       */
      var request;
      request = $.ajax({
        url: "/workers/",
        type: "GET",
        data: {
          boss: bossId,
          count: count,
          unnecessaryId: encodeURI(shownFirstWorkersId.join())
        },
        async: false
      });
      if (bossId === "first-hierarchy") {
        request.done(this.AJAXsuccessGetWorkers);
        return request.fail(this.AJAXerrorGetWorkers);
      } else {

      }
    };

    AJAXWorkersManager.prototype.AJAXsuccessGetWorkers = function(data, textStatus, jqXHR) {
      var element, i, len, results;
      results = [];
      for (i = 0, len = data.length; i < len; i++) {
        element = data[i];
        results.push(shownFirstWorkersId.push(element.id));
      }
      return results;
    };

    AJAXWorkersManager.prototype.AJAXerrorGetWorkers = function(jqXHR, textStatus, errorThrown) {
      return console.log("Error: " + jqXHR + ", " + textStatus + ", " + errorThrown);
    };

    AJAXWorkersManager.prototype.showFirstHierarchy = function(count) {
      if (count == null) {
        count = 100;
      }

      /* Display list first hierarchy 
      
      count: Get count users
       */
      return this.getWorkersBoss("first-hierarchy", count);
    };

    AJAXWorkersManager.prototype.showWorkersInTree = function(parentEmployeeContainer) {

      /* Show 2 and more hierarchy workers */
    };

    AJAXWorkersManager.prototype.getShownedListId = function() {
      return console.log(shownFirstWorkersId);
    };

    return AJAXWorkersManager;

  })();

  $(document).ready(function() {
    var me2;
    me2 = new AJAXWorkersManager;
    return me2.showFirstHierarchy();
  });

}).call(this);
